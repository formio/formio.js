!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){!function(e){function n(){this._events={},this._conf&&i.call(this,this._conf)}function i(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._events.maxListeners=t.maxListeners!==e?t.maxListeners:c,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=c}function o(e,t){var r="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(r+=" Event name: %s.",console.error(r,e,t)):console.error(r,e),console.trace&&console.trace()}function s(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,i.call(this,e)}function a(e,t,r,n){if(!r)return[];var i,o,s,l,u,c,f,h=[],p=t.length,d=t[n],y=t[n+1];if(n===p&&r._listeners){if("function"==typeof r._listeners)return e&&e.push(r._listeners),[r];for(i=0,o=r._listeners.length;i<o;i++)e&&e.push(r._listeners[i]);return[r]}if("*"===d||"**"===d||r[d]){if("*"===d){for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&(h=h.concat(a(e,t,r[s],n+1)));return h}if("**"===d){f=n+1===p||n+2===p&&"*"===y,f&&r._listeners&&(h=h.concat(a(e,t,r,p)));for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&("*"===s||"**"===s?(r[s]._listeners&&!f&&(h=h.concat(a(e,t,r[s],p))),h=h.concat(a(e,t,r[s],n))):h=s===y?h.concat(a(e,t,r[s],n+2)):h.concat(a(e,t,r[s],n)));return h}h=h.concat(a(e,t,r[d],n+1))}if(l=r["*"],l&&a(e,t,l,n+1),u=r["**"])if(n<p){u._listeners&&a(e,t,u,p);for(s in u)"_listeners"!==s&&u.hasOwnProperty(s)&&(s===y?a(e,t,u[s],n+2):s===d?a(e,t,u[s],n+1):(c={},c[s]=u[s],a(e,t,{"**":c},n+1)))}else u._listeners?a(e,t,u,p):u["*"]&&u["*"]._listeners&&a(e,t,u["*"],p);return h}function l(t,r){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,i=t.length;n+1<i;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var s=this.listenerTree,a=t.shift();a!==e;){if(s[a]||(s[a]={}),s=s[a],0===t.length)return s._listeners?("function"==typeof s._listeners&&(s._listeners=[s._listeners]),s._listeners.push(r),!s._listeners.warned&&this._events.maxListeners>0&&s._listeners.length>this._events.maxListeners&&(s._listeners.warned=!0,o.call(this,s._listeners.length,a))):s._listeners=r,!0;a=t.shift()}return!0}var u=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=10;s.EventEmitter2=s,s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){t!==e&&(this._events||n.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},s.prototype.event="",s.prototype.once=function(e,t){return this.many(e,1,t),this},s.prototype.many=function(e,t,r){function n(){0===--t&&i.off(e,n),r.apply(this,arguments)}var i=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");return n._origin=r,this.on(e,n),i},s.prototype.emit=function(){this._events||n.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,r,i,o,s,l=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),l>3)for(t=new Array(l),o=0;o<l;o++)t[o]=arguments[o];for(i=0,r=s.length;i<r;i++)switch(this.event=e,l){case 1:s[i].call(this,e);break;case 2:s[i].call(this,e,arguments[1]);break;case 3:s[i].call(this,e,arguments[1],arguments[2]);break;default:s[i].apply(this,t)}}if(this.wildcard){s=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();a.call(this,s,u,this.listenerTree,0)}else{if(s=this._events[e],"function"==typeof s){switch(this.event=e,l){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(l-1),o=1;o<l;o++)t[o-1]=arguments[o];s.apply(this,t)}return!0}s&&(s=s.slice())}if(s&&s.length){if(l>3)for(t=new Array(l-1),o=1;o<l;o++)t[o-1]=arguments[o];for(i=0,r=s.length;i<r;i++)switch(this.event=e,l){case 1:s[i].call(this);break;case 2:s[i].call(this,arguments[1]);break;case 3:s[i].call(this,arguments[1],arguments[2]);break;default:s[i].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){this._events||n.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,r,i,o,s,l=[],u=arguments.length;if(this._all){if(u>3)for(t=new Array(u),o=1;o<u;o++)t[o]=arguments[o];for(i=0,r=this._all.length;i<r;i++)switch(this.event=e,u){case 1:l.push(this._all[i].call(this,e));break;case 2:l.push(this._all[i].call(this,e,arguments[1]));break;case 3:l.push(this._all[i].call(this,e,arguments[1],arguments[2]));break;default:l.push(this._all[i].apply(this,t))}}if(this.wildcard){s=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();a.call(this,s,c,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s)switch(this.event=e,u){case 1:l.push(s.call(this));break;case 2:l.push(s.call(this,arguments[1]));break;case 3:l.push(s.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(u-1),o=1;o<u;o++)t[o-1]=arguments[o];l.push(s.apply(this,t))}else if(s&&s.length){if(u>3)for(t=new Array(u-1),o=1;o<u;o++)t[o-1]=arguments[o];for(i=0,r=s.length;i<r;i++)switch(this.event=e,u){case 1:l.push(s[i].call(this));break;case 2:l.push(s[i].call(this,arguments[1]));break;case 3:l.push(s[i].call(this,arguments[1],arguments[2]));break;default:l.push(s[i].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},s.prototype.on=function(e,t){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||n.call(this),this.emit("newListener",e,t),this.wildcard?(l.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),this._events[e].push(t),!this._events[e].warned&&this._events.maxListeners>0&&this._events[e].length>this._events.maxListeners&&(this._events[e].warned=!0,o.call(this,this._events[e].length,e))):this._events[e]=t,this)},s.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,r){function n(t){if(t!==e){var r=Object.keys(t);for(var i in r){var o=r[i],s=t[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&n(t[o]),0===Object.keys(s).length&&delete t[o])}}}if("function"!=typeof r)throw new Error("removeListener only takes instances of Function");var i,o=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();o=a.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;i=this._events[t],o.push({_listeners:i})}for(var l=0;l<o.length;l++){var c=o[l];if(i=c._listeners,u(i)){for(var f=-1,h=0,p=i.length;h<p;h++)if(i[h]===r||i[h].listener&&i[h].listener===r||i[h]._origin&&i[h]._origin===r){f=h;break}if(f<0)continue;return this.wildcard?c._listeners.splice(f,1):this._events[t].splice(f,1),0===i.length&&(this.wildcard?delete c._listeners:delete this._events[t]),this.emit("removeListener",t,r),this}(i===r||i.listener&&i.listener===r||i._origin&&i._origin===r)&&(this.wildcard?delete c._listeners:delete this._events[t],this.emit("removeListener",t,r))}return n(this.listenerTree),this},s.prototype.offAny=function(e){var t,r=0,n=0;if(e&&this._all&&this._all.length>0){for(t=this._all,r=0,n=t.length;r<n;r++)if(e===t[r])return t.splice(r,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,r=0,n=t.length;r<n;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||n.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),r=a.call(this,null,t,this.listenerTree,0),i=0;i<r.length;i++){var o=r[i];o._listeners=null}else this._events&&(this._events[e]=null);return this},s.prototype.listeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return a.call(this,t,r,this.listenerTree,0),t}return this._events||n.call(this),this._events[e]||(this._events[e]=[]),u(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},s.prototype.listenerCount=function(e){return this.listeners(e).length},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return s}):"object"==typeof r?t.exports=s:window.EventEmitter2=s}()},{}],2:[function(e,t,r){(function(e){!function(e,r,n){r[e]=r[e]||n(),"undefined"!=typeof t&&t.exports?t.exports=r[e]:"function"==typeof define&&define.amd&&define(function(){return r[e]})}("Promise","undefined"!=typeof e?e:this,function(){"use strict";function e(e,t){h.add(e,t),f||(f=d(h.drain))}function t(e){var t,r=typeof e;return null==e||"object"!=r&&"function"!=r||(t=e.then),"function"==typeof t&&t}function r(){for(var e=0;e<this.chain.length;e++)n(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function n(e,r,n){var i,o;try{r===!1?n.reject(e.msg):(i=r===!0?e.msg:r.call(void 0,e.msg),i===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=t(i))?o.call(i,n.resolve,n.reject):n.resolve(i))}catch(s){n.reject(s)}}function i(n){var s,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(s=t(n))?e(function(){var e=new a(l);try{s.call(n,function(){i.apply(e,arguments)},function(){o.apply(e,arguments)})}catch(t){o.call(e,t)}}):(l.msg=n,l.state=1,l.chain.length>0&&e(r,l))}catch(u){o.call(new a(l),u)}}}function o(t){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=t,n.state=2,n.chain.length>0&&e(r,n))}function s(e,t,r,n){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then(function(e){r(i,e)},n)}(i)}function a(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new l(this);this.then=function(t,i){var o={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),n.chain.push(o),0!==n.state&&e(r,n),o.promise},this["catch"]=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){i.call(n,e)},function(e){o.call(n,e)})}catch(s){o.call(n,s)}}var c,f,h,p=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(e,t,r,n){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:n!==!1})}}catch(y){c=function(e,t,r){return e[t]=r,e}}h=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,r,n;return{add:function(i,o){n=new e(i,o),r?r.next=n:t=n,r=n,n=void 0},drain:function(){var e=t;for(t=r=f=void 0;e;)e.fn.call(e.self),e=e.next}}}();var v=c({},"constructor",u,!1);return u.prototype=v,c(v,"__NPO__",0,!1),c(u,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(e)})}),c(u,"reject",function(e){return new this(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");r(e)})}),c(u,"all",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=e.length,o=Array(i),a=0;s(t,e,function(e,t){o[e]=t,++a===i&&r(o)},n)})}),c(u,"race",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");s(t,e,function(e,t){r(t)},n)})}),u})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,r){t.exports=function(e){if(!e||"object"!=typeof e)return e;var t;if(i(e)){var r=e.length;t=Array(r);for(var o=0;o<r;o++)t[o]=e[o]}else{var s=n(e);t={};for(var o=0,a=s.length;o<a;o++){var l=s[o];t[l]=e[l]}}return t};var n=Object.keys||function(e){var t=[];for(var r in e)({}).hasOwnProperty.call(e,r)&&t.push(r);return t},i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)}},{}],4:[function(e,t,r){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),o(t)}function a(e){var t=new FileReader;return t.readAsText(e),o(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(d.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(d.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},d.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function c(e,t){t=t||{};var r=t.body;if(c.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new n(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function h(e){var t=new n,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),i=r.join(":").trim();t.append(n,i)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){n.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(n)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};var d={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];p.redirect=function(e,t){if(v.indexOf(t)===-1)throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=c,e.Response=p,e.fetch=function(e,t){return new Promise(function(r,n){function i(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var o;o=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);var s=new XMLHttpRequest;s.onload=function(){var e=1223===s.status?204:s.status;if(e<100||e>599)return void n(new TypeError("Network request failed"));var t={status:e,statusText:s.statusText,headers:h(s),url:i()},o="response"in s?s.response:s.responseText;r(new p(o,t))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials&&(s.withCredentials=!0),"responseType"in s&&d.blob&&(s.responseType="blob"),o.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],5:[function(e,t,r){(function(r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("native-promise-only");e("whatwg-fetch");var o=e("eventemitter2").EventEmitter2,s=e("shallow-copy"),a=e("./providers"),l="https://api.form.io",u=l,c=!1,f=[],h={},p=function(){},d=function(e){return e},y=function(e){var t=[].slice.call(arguments,1);return i.all(f.map(function(r){return(r[e]||p).apply(r,t)}))},v=function(e){var t=[].slice.call(arguments,0),r=function n(e,r){var o=f[e];return o?i.resolve((o&&o[r]||p).apply(o,[].slice.call(arguments,2))).then(function(r){return null!==r&&void 0!==r?r:n.apply(null,[e+1].concat(t))}):i.resolve(null)};return r.apply(null,[0].concat(t))},m=function(e,t){var r=[].slice.call(arguments,2);return f.reduce(function(t,n){return(n[e]||d).apply(n,[t].concat(r))},t)},w=function(e){var t="^(http[s]?:\\/\\/)";return t+=l&&0===e.indexOf(l)?"("+l.replace(/^http[s]?:\/\//,"")+")":"([^/]+)",t+="($|\\/.*)",e.match(new RegExp(t))},g=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")},b=function x(e){if(!(this instanceof x))return new x(e);if(!e)return this.projectUrl=l+"/project",this.projectsUrl=l+"/project",this.projectId=!1,void(this.query="");this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",0!==e.indexOf("http")&&0!==e.indexOf("//")&&(l=l?l:window.location.href.match(/http[s]?:\/\/api./)[0],e=l+e);var t=w(e),r=[],n=t[1]+t[2];e=t.length>3?t[3]:"";var i=e.split("?");if(i.length>1&&(e=i[0],this.query="?"+i[1]),e.search(/(^|\/)(form|project)($|\/)/)!==-1){var o=function(t,n){this[t+"sUrl"]=n+"/"+t;var i=new RegExp("/"+t+"/([^/]+)");return e.search(i)!==-1&&(r=e.match(i),this[t+"Url"]=r?n+r[0]:"",this[t+"Id"]=r.length>1?r[1]:"",n+=r[0]),n}.bind(this),s=function y(e,t,r){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(i instanceof Array)y(i,t,!0);else{var s=o(i,t);t=r?t:s}}};s(["project","form",["submission","action"]],n),this.projectId||t.length>2&&t[2].split(".").length>2&&(this.projectUrl=n,this.projectId=t[2].split(".")[0])}else{this.projectUrl=n,this.projectId=t.length>2?t[2].split(".")[0]:"";var a=new RegExp("/(submission|action)($|/.*)"),f=e.match(a);this.pathType=f&&f.length>1?f[1]:"",e=e.replace(a,""),e=e.replace(/\/$/,""),this.formsUrl=n+"/form",this.formUrl=n+e,this.formId=e.replace(/^\/+|\/+$/g,"");var h=["submission","action"];for(var p in h)if(h.hasOwnProperty(p)){var d=h[p];this[d+"sUrl"]=n+e+"/"+d,this.pathType===d&&f.length>2&&f[2]&&(this[d+"Id"]=f[2].replace(/^\/+|\/+$/g,""),this[d+"Url"]=n+e+f[0])}}c||(u=this.projectUrl)},_=function(e){var t=e+"Id",r=e+"Url";return function(o,s){return o&&"object"===("undefined"==typeof o?"undefined":n(o))&&(o=g(o.params)),o=o?this.query?this.query+"&"+o:"?"+o:this.query,this[t]?this.makeRequest(e,this[r]+o,"get",null,s):i.reject("Missing "+t)}},k=function(e){var t=e+"Id",r=e+"Url";return function(n,i){var o=this[t]||n._id?"put":"post",s=this[t]?this[r]:this[e+"sUrl"];return!this[t]&&n._id&&"put"===o&&(s+="/"+n._id),h={},this.makeRequest(e,s+this.query,o,n,i)}},j=function(e){var t=e+"Id",r=e+"Url";return function(n){return this[t]||i.reject("Nothing to delete"),h={},this.makeRequest(e,this[r],"delete",null,n)}},T=function(e){var t=e+"Url";return function(r,i){return r=r||"",r&&"object"===("undefined"==typeof r?"undefined":n(r))&&(r="?"+g(r.params)),this.makeRequest(e,this[t]+r,"get",null,i)}};b.prototype.makeRequest=function(e,t,r,i,o){var s=this;r=(r||"GET").toUpperCase(),o&&"object"===("undefined"==typeof o?"undefined":n(o))||(o={});var a={formio:s,type:e,url:t,method:r,data:i,opts:o},l=y("preRequest",a).then(function(){return v("request",a).then(function(e){return null===e||void 0===e?b.request(t,r,i,o.header,o):e})});return m("wrapRequestPromise",l,a)},b.prototype.loadProject=_("project"),b.prototype.saveProject=k("project"),b.prototype.deleteProject=j("project"),b.prototype.loadForm=_("form"),b.prototype.saveForm=k("form"),b.prototype.deleteForm=j("form"),b.prototype.loadForms=T("forms"),b.prototype.loadSubmission=_("submission"),b.prototype.saveSubmission=k("submission"),b.prototype.deleteSubmission=j("submission"),b.prototype.loadSubmissions=T("submissions"),b.prototype.loadAction=_("action"),b.prototype.saveAction=k("action"),b.prototype.deleteAction=j("action"),b.prototype.loadActions=T("actions"),b.prototype.availableActions=function(){return this.makeRequest("availableActions",this.formUrl+"/actions")},b.prototype.actionInfo=function(e){return this.makeRequest("actionInfo",this.formUrl+"/actions/"+e)},b.prototype.uploadFile=function(e,t,r,n,i,o){var s={provider:e,method:"upload",file:t,fileName:r,dir:n},l=y("preRequest",s).then(function(){return v("fileRequest",s).then(function(s){if(e&&(null===s||void 0===s)){if(a.storage.hasOwnProperty(e)){var l=new a.storage[e](this);return l.uploadFile(t,r,n,i,o)}throw"Storage provider not found"}return s||{url:""}}.bind(this))}.bind(this));return m("wrapFileRequestPromise",l,s)},b.prototype.downloadFile=function(e){var t={method:"download",file:e},r=y("preRequest",t).then(function(){return v("fileRequest",t).then(function(t){if(e.storage&&(null===t||void 0===t)){if(a.storage.hasOwnProperty(e.storage)){var r=new a.storage[e.storage](this);return r.downloadFile(e)}throw"Storage provider not found"}return t||{url:""}}.bind(this))}.bind(this));return m("wrapFileRequestPromise",r,t)},b.makeStaticRequest=function(e,t,r,i){t=(t||"GET").toUpperCase(),i&&"object"===("undefined"==typeof i?"undefined":n(i))||(i={});var o={url:e,method:t,data:r},s=y("preRequest",o).then(function(){return v("staticRequest",o).then(function(n){return null===n||void 0===n?b.request(e,t,r,i.header,i):n})});return m("wrapStaticRequestPromise",s,o)},b.loadProjects=function(e){return e=e||"","object"===("undefined"==typeof e?"undefined":n(e))&&(e="?"+g(e.params)),this.makeStaticRequest(l+"/project"+e)},b.request=function(e,t,r,o,a){if(!e)return i.reject("No url provided");t=(t||"GET").toUpperCase(),"boolean"==typeof a&&(a={ignoreCache:a}),a&&"object"===("undefined"==typeof a?"undefined":n(a))||(a={});var l=btoa(e);return new i(function(s,u){return!a.ignoreCache&&"GET"===t&&h.hasOwnProperty(l)?s(h[l]):void s(new i(function(n,i){var s=o||new Headers({Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),a=b.getToken();a&&s.append("x-jwt-token",a);var l={method:t,headers:s,mode:"cors"};r&&(l.body=JSON.stringify(r)),n(fetch(e,l))})["catch"](function(e){throw e.message="Could not connect to API server ("+e.message+")",e.networkError=!0,e}).then(function(e){if(!e.ok)return 440===e.status?(b.setToken(null),b.events.emit("formio.sessionExpired",e.body)):401===e.status&&b.events.emit("formio.unauthorized",e.body),(e.headers.get("content-type").indexOf("application/json")!==-1?e.json():e.text()).then(function(e){throw e});var t=e.headers.get("x-jwt-token");return e.status>=200&&e.status<300&&t&&""!==t&&b.setToken(t),204===e.status?{}:(e.headers.get("content-type").indexOf("application/json")!==-1?e.json():e.text()).then(function(t){var r=e.headers.get("content-range");if(r&&"object"===("undefined"==typeof t?"undefined":n(t))){if(r=r.split("/"),"*"!==r[0]){var o=r[0].split("-");t.skip=Number(o[0]),t.limit=o[1]-o[0]+1}t.serverCount="*"===r[1]?r[1]:Number(r[1])}if(!a.getHeaders)return t;var s={};return e.headers.forEach(function(e,t){s[t]=e}),new i(function(e,r){e({result:t,headers:s})})})})["catch"](function(e){throw"Bad Token"===e&&(b.setToken(null),b.events.emit("formio.badToken",e)),delete h[l],e}))}).then(function(e){if("GET"===t&&(h[l]=i.resolve(e)),Array.isArray(e)){var r=e.map(s);return r.skip=e.skip,r.limit=e.limit,r.serverCount=e.serverCount,r}return s(e)})},b.setToken=function(e){if(e=e||"",e!==this.token){if(this.token=e,!e){b.setUser(null);try{return localStorage.removeItem("formioToken")}catch(t){return}}try{localStorage.setItem("formioToken",e)}catch(t){}return b.currentUser()}},b.getToken=function(){if(this.token)return this.token;try{var e=localStorage.getItem("formioToken")||"";return this.token=e,e}catch(t){return""}},b.setUser=function(e){if(!e){this.setToken(null);try{return localStorage.removeItem("formioUser")}catch(t){return}}try{localStorage.setItem("formioUser",JSON.stringify(e))}catch(t){}},b.getUser=function(){try{return JSON.parse(localStorage.getItem("formioUser")||null)}catch(e){return}},b.setBaseUrl=function(e){l=e,c||(u=e)},b.getBaseUrl=function(){return l},b.setAppUrl=function(e){u=e,c=!0},b.getAppUrl=function(){return u},b.clearCache=function(){h={}},b.form=function(e,t,r){if(r||"function"!=typeof t||(r=t,t={}),r=r||function(){console.log(arguments)},t=t||{},e.jquery&&(e=e[0]),!e)return r("Invalid Form");var n=function(){return t.form||e.getAttribute("action")},i=function(){for(var t={data:{}},r=function(e,r){var n="[]"===e.substr(-2);n&&(e=e.replace("[]",""));for(var i=e.replace(/\[|\]\[/g,".").replace(/\]$/g,"").split("."),o=t;e=i.shift();)i.length?(o[e]||(o[e]={}),o=o[e]):n?(o[e]||(o[e]=[]),o[e].push(r)):o[e]=r},n=new FormData(e),i=n.entries(),o=null;o=i.next().value;)r(o[0],o[1]);return t},o=function(e){e&&e.preventDefault();var t=n();t&&new b(t).saveSubmission(i()).then(function(e){r(null,e)},r)};return e.attachEvent?e.attachEvent("submit",o):e.addEventListener("submit",o),{submit:o,getAction:n,getSubmission:i}},b.currentUser=function(){var e=l+"/current",t=this.getUser();if(t)return m("wrapStaticRequestPromise",i.resolve(t),{url:e,method:"GET"});var r=this.getToken();return r?this.makeStaticRequest(e).then(function(e){return b.setUser(e),e}):m("wrapStaticRequestPromise",i.resolve(null),{url:e,method:"GET"})},b.logout=function(){var e=function(e){return this.setToken(null),this.setUser(null),b.clearCache(),e}.bind(this);return this.makeStaticRequest(l+"/logout").then(e)["catch"](e)},b.fieldData=function(e,t){if(!e)return"";if(!t||!t.key)return e;if(t.key.indexOf(".")!==-1){for(var r=e,n=t.key.split("."),i="",o=0;o<n.length;o++){if(i=n[o],r.hasOwnProperty("_id")&&(r=r.data),!r.hasOwnProperty(i))return;i===n[n.length-1]&&t.multiple&&!Array.isArray(r[i])&&(r[i]=[r[i]]),r=r[i]}return r}return t.multiple&&!Array.isArray(e[t.key])&&(e[t.key]=[e[t.key]]),e[t.key]},b.providers=a,b.events=new o({wildcard:!1,maxListeners:0}),b.registerPlugin=function(e,t){f.push(e),f.sort(function(e,t){return(t.priority||0)-(e.priority||0)}),e.__name=t,(e.init||p).call(e,b)},b.getPlugin=function(e){return f.reduce(function(t,r){return t?t:r.__name===e?r:void 0},null)},b.deregisterPlugin=function(e){var t=f.length;return f=f.filter(function(t){return t!==e&&t.__name!==e||((t.deregister||p).call(t,b),!1)}),t!==f.length},t.exports=r.Formio=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./providers":6,eventemitter2:1,"native-promise-only":2,"shallow-copy":3,"whatwg-fetch":4}],6:[function(e,t,r){"use strict";t.exports={storage:e("./storage")}},{"./storage":8}],7:[function(e,t,r){"use strict";var n=e("native-promise-only"),i=function(e){return{uploadFile:function(t,r,i,o){return new n(function(n,s){var a=new XMLHttpRequest;"function"==typeof o&&(a.upload.onprogress=o);var l=new FormData;l.append("name",r),l.append("dir",i),l.append("file",t),a.onerror=function(e){e.networkError=!0,s(e)},a.onload=function(){if(a.status>=200&&a.status<300){var e=JSON.parse(a.response);e.storage="dropbox",e.size=t.size,e.type=t.type,e.url=e.path_lower,n(e)}else s(a.response||"Unable to upload file")},a.onabort=function(e){s(e)},a.open("POST",e.formUrl+"/storage/dropbox");var u=!1;try{u=localStorage.getItem("formioToken")}catch(c){}u&&a.setRequestHeader("x-jwt-token",u),a.send(l)})},downloadFile:function(t){var r=!1;try{r=localStorage.getItem("formioToken")}catch(i){}return t.url=e.formUrl+"/storage/dropbox?path_lower="+t.path_lower+(r?"&x-jwt-token="+r:""),n.resolve(t)}}};i.title="Dropbox",t.exports=i},{"native-promise-only":2}],8:[function(e,t,r){"use strict";t.exports={dropbox:e("./dropbox.js"),s3:e("./s3.js"),url:e("./url.js")}},{"./dropbox.js":7,"./s3.js":9,"./url.js":10}],9:[function(e,t,r){"use strict";var n=e("native-promise-only"),i=function(e){return{uploadFile:function(t,r,i,o){return new n(function(n,s){var a=new XMLHttpRequest,l=new FormData;l.append("name",r),l.append("size",t.size),l.append("type",t.type),a.onerror=function(e){e.networkError=!0,s(e)},a.onabort=function(e){s(e)},a.onload=function(){if(a.status>=200&&a.status<300){var e=JSON.parse(a.response),l=new XMLHttpRequest;"function"==typeof o&&(l.upload.onprogress=o),
e.data.fileName=r,e.data.key+=i+r;var u=new FormData;for(var c in e.data)u.append(c,e.data[c]);u.append("file",t),l.onerror=function(e){e.networkError=!0,s(e)},l.onload=function(){l.status>=200&&l.status<300?n({storage:"s3",name:r,bucket:e.bucket,key:e.data.key,url:e.url+e.data.key,acl:e.data.acl,size:t.size,type:t.type}):s(l.response||"Unable to upload file")},l.onabort=function(e){s(e)},l.open("POST",e.url),l.send(u)}else s(a.response||"Unable to sign file")},a.open("POST",e.formUrl+"/storage/s3"),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json; charset=UTF-8");var u=!1;try{u=localStorage.getItem("formioToken")}catch(c){}u&&a.setRequestHeader("x-jwt-token",u),a.send(JSON.stringify({name:r,size:t.size,type:t.type}))})},downloadFile:function(t){return"public-read"!==t.acl?e.makeRequest("file",e.formUrl+"/storage/s3?bucket="+t.bucket+"&key="+t.key,"GET"):n.resolve(t)}}};i.title="S3",t.exports=i},{"native-promise-only":2}],10:[function(e,t,r){"use strict";var n=e("native-promise-only"),i=function(e){return{title:"Url",name:"url",uploadFile:function(e,t,r,i,o){return new n(function(n,s){var a={dir:r,name:t,file:e},l=new XMLHttpRequest;"function"==typeof i&&(l.upload.onprogress=i);var u=new FormData;for(var c in a)u.append(c,a[c]);l.onload=function(){l.status>=200&&l.status<300?n({storage:"url",name:t,url:l.response.url,size:e.size,type:e.type}):s(l.response||"Unable to upload file")},l.onerror=function(){s(l)},l.onabort=function(){s(l)},l.open("POST",o),l.send(u)})},downloadFile:function(e){return n.resolve(e)}}};i.title="Url",t.exports=i},{"native-promise-only":2}]},{},[5]);