/*! For license information please see formio.embed.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Formio=t():e.Formio=t()}(self,(function(){return function(){"use strict";var e={44964:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.baseUrl=e||"https://cdn.form.io",this.overrides={},this.libs={ace:"1.4.12",bootstrap:"4.6.2",ckeditor:"19.0.0",flatpickr:"4.6.8","flatpickr-formio":"4.6.13-formio.2","font-awesome":"4.7.0",grid:"latest","moment-timezone":"latest",quill:"2.0.0-dev.3","shortcut-buttons-flatpickr":"0.4.0",uswds:"2.4.8",core:""},this.updateUrls()}getVersion(e){return this.libs[e]}setVersion(e,t){this.libs[e]=t,this.updateUrls()}setBaseUrl(e){this.baseUrl=e,this.updateUrls()}setOverrideUrl(e,t){this.overrides[e]=t,this.updateUrls()}removeOverride(e){delete this.overrides[e],this.updateUrls()}removeOverrides(){this.overrides={},this.updateUrls()}buildUrl(e,t,s){let i;return i="latest"===s||""===s?`${e}/${t}`:`${e}/${t}/${s}`,i}updateUrls(){for(const e in this.libs)e in this.overrides?this[e]=this.buildUrl(this.overrides[e],e,this.libs[e]):this[e]=this.buildUrl(this.baseUrl,e,this.libs[e])}}},45553:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.embed=void 0;const o=i(s(44964));t.embed=function(e={}){const t=document.getElementsByTagName("script");e=Object.assign(e,window.FormioConfig);let s=null,i=t.length;const r=e.scriptName||"formio.embed.";for(;i--;)if(t[i].src&&-1!==t[i].src.indexOf(r)){s=t[i];break}if(s){const t={};s.src.replace(/^[^?]+\??/,"").replace(/\?/g,"&").split("&").forEach((e=>{t[e.split("=")[0]]=e.split("=")[1]&&decodeURIComponent(e.split("=")[1])}));let i=s.src.replace(/^([^?]+).*/,"$1").split("/");i.pop(),e.formioPath&&e.formioPath(i),i=i.join("/"),t.script=t.script||`${e.updatePath?e.updatePath():i}/formio.form.min.js`,t.styles=t.styles||`${e.updatePath?e.updatePath():i}/formio.form.min.css`;const r=t.cdn||"https://cdn.jsdelivr.net/npm",n=e=>{const t={uswds:{fa:!0,js:`${e}/uswds@2.10.0/dist/js/uswds.min.js`,css:`${e}/uswds@2.10.0/dist/css/uswds.min.css`},fontawesome:{css:`${e}/font-awesome@4.7.0/css/font-awesome.min.css`},bootstrap:{css:`${e}/bootstrap@4.6.0/dist/css/bootstrap.min.css`}};if(e instanceof o.default){const s=e.baseUrl;t.uswds.js=`${s}/uswds/${e.getVersion("uswds")}/uswds.min.js`,t.uswds.css=`${s}/uswds/${e.getVersion("uswds")}/uswds.min.css`,t.fontawesome.css=`${s}/font-awesome/${e.getVersion("font-awesome")}/css/font-awesome.min.css`,t.bootstrap.css=`${s}/bootstrap/${e.getVersion("bootstrap")}/css/bootstrap.min.css`}return t};e=Object.assign({script:t.script,style:t.styles,class:t.class||"formio-form-wrapper",src:t.src,form:null,submission:null,project:t.project,base:t.base,submit:t.submit,includeLibs:"true"===t.libs||"1"===t.libs,template:t.template,debug:"true"===t.debug||"1"===t.debug,config:{},redirect:t.return||t.redirect,before:()=>{},after:()=>{}},e);const a=(...t)=>{e.debug&&console.log(...t)},d=(e,t,s)=>{const i=document.createElement(e);for(const e in t)t.hasOwnProperty(e)&&i.setAttribute(e,t[e]);return(s||[]).forEach((e=>{i.appendChild(d(e.tag,e.attrs,e.children))})),i};a("Embedding Configuration",e),e.addPremiumLib&&e.addPremiumLib(e,i);const l=`formio-${Math.random().toString(36).substring(7)}`;e.id=l,a("Creating form wrapper");let c=d("div",{id:`"${l}-wrapper"`});s.parentNode.insertBefore(c,s.parentNode.firstElementChild.nextSibling),e.includeLibs&&"function"==typeof c.attachShadow&&!e.premium&&(c=c.attachShadow({mode:"open"}),e.config.shadowRoot=c);const m=e=>{const t=window[e];return a(`Getting global ${e}`,t),t},u=(e,t)=>{if(!e)return;if("string"!=typeof e&&e.length)return void e.forEach((e=>u(e)));a("Adding Styles",e);const s=d("link",{rel:"stylesheet",href:e});t&&document.head.appendChild(s),c.appendChild(d("link",{rel:"stylesheet",href:e}))},p=(e,t,s)=>{if(e)if("string"!=typeof e&&e.length)e.forEach((e=>p(e)));else{if(t&&m(t))return a(`${t} already loaded.`),m(t);if(a("Adding Script",e),c.appendChild(d("script",{src:e})),t&&s){a(`Waiting to load ${t}`);const e=setInterval((()=>{m(t)&&(clearInterval(e),a(`${t} loaded.`),s(m(t)))}),100)}}};u(`${e.updatePath?e.updatePath():i}/formio.embed.min.css`),a("Creating loader");const f=d("div",{class:"formio-loader"},[{tag:"div",attrs:{class:"loader-wrapper"},children:[{tag:"div",attrs:{class:"loader text-center"}}]}]);c.appendChild(f),a("Creating form element");const b=d("div",{class:e.class});c.appendChild(b),p(e.script,"Formio",(s=>{const i=()=>{u(e.style);const t=e.before(s,b,e)||s.Promise.resolve(),i=e.form||e.src;a("Creating form",i,e.config),t.then((()=>{s.license=!0,s.createForm(b,i,e.config).then((t=>{const i=s=>{a("Submision Complete",s);let i=e.redirect;if(!i&&t._form&&t._form.settings&&(t._form.settings.returnUrl||t._form.settings.redirect)&&(a("Return url found in form configuration"),i=t._form.settings.returnUrl||t._form.settings.redirect),i){const e=t.formio?t.formio.formUrl:"",o=!!i.match(/\?/),r=0===i.indexOf(location.origin);i+=o?"&":"?",i+=`sub=${s._id}`,!r&&e&&(i+=`&form=${encodeURIComponent(e)}`),a("Return URL",i),window.location.href=i,r&&window.location.reload()}};e.submit&&(t.nosubmit=!0),a("Form created",t),a("Removing loader"),c.removeChild(f),e.submission&&(a("Setting submission",e.submission),t.submission=e.submission),a("Triggering embed event"),s.events.emit("formEmbedded",t),a("Calling ready callback"),e.after(t,e),t.on("submit",(t=>{if(a("on('submit')",t),e.submit){a(`Sending submission to ${e.submit}`);const o={"content-type":"application/json"},r=s.getToken();r&&(o["x-jwt-token"]=r),s.fetch(e.submit,{body:JSON.stringify(t),headers:o,method:"POST",mode:"cors"}).then((e=>e.json())).then((e=>i(e)))}else i(t)}))}))}))};if(e.base&&s.setBaseUrl(e.base),e.project&&s.setProjectUrl(e.project),m("premium")&&(a("Using premium module."),s.use(m("premium"))),m("vpat")&&(a("Using vpat module."),s.use(m("vpat"))),e.template){let t;e.includeLibs&&(u(e.libs[e.template].css),p(e.libs[e.template].js),e.libs[e.template].fa&&u(e.libs.fontawesome.css,!0)),t=r instanceof o.default?`${r[e.template]}/${e.template}.min`:`${r}/@formio/${e.template}@latest/dist/${e.template}.min`,u(`${t}.css`),p(`${t}.js`,e.template,(t=>{a(`Using ${e.template}`),s.use(t),i()}))}else m("uswds")?(a("Using uswds module."),s.use(m("uswds"))):e.includeLibs&&(s.cdn=new o.default,e.libs=n(t.cdn||s.cdn),u(e.libs.fontawesome.css,!0),u(e.libs.bootstrap.css));e.premium&&(u(e.premium.css),p(e.premium.js,"premium",(e=>{a("Using premium"),s.use(e),i()}))),e.template||e.premium||i()}))}else document.write("<span>Could not locate the Embedded form.</span>")}}},t={};var s={};return(0,function s(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}(45553).embed)(),s.Formio}()}));